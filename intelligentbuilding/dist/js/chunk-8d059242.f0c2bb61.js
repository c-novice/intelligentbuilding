(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d059242"],{"1dde":function(e,i,t){var o=t("d039"),a=t("b622"),p=t("2d00"),s=a("species");e.exports=function(e){return p>=51||!o((function(){var i=[],t=i.constructor={};return t[s]=function(){return{foo:1}},1!==i[e](Boolean).foo}))}},"25cb":function(e,i,t){},"65f0":function(e,i,t){var o=t("861d"),a=t("e8b5"),p=t("b622"),s=p("species");e.exports=function(e,i){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?o(t)&&(t=t[s],null===t&&(t=void 0)):t=void 0),new(void 0===t?Array:t)(0===i?0:i)}},"78b8":function(e,i,t){"use strict";t.r(i);var o=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("el-container",[t("el-header",[t("el-page-header",{attrs:{content:"自由组合"}})],1),t("el-aside",[t("el-switch",{attrs:{disabled:!e.ableRoaming,"active-text":"漫游模式","inactive-text":" "},on:{change:e.roamingChange},model:{value:e.switchRoaming,callback:function(i){e.switchRoaming=i},expression:"switchRoaming"}}),t("el-switch",{attrs:{disabled:!e.ablePatrol,"active-text":"楼层巡视","inactive-text":" "},on:{change:e.patrolChange},model:{value:e.switchPatrol,callback:function(i){e.switchPatrol=i},expression:"switchPatrol"}}),t("br"),t("br"),t("el-tree",{ref:"tree1",attrs:{data:e.simpleData,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps},on:{check:e.handleTreeNodeClick}}),t("el-tree",{ref:"tree2",attrs:{data:e.detailData,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps},on:{check:e.handleTreeNodeClick}})],1),t("div",{attrs:{id:"container"}})],1)},a=[],p=(t("d81d"),t("4795"),t("0d03"),t("d3b7"),t("25f0"),t("5a89")),s=t("4721"),n=t("34ad"),r=t("fa06"),l=null,d=null,c=null,h=new Array(10),x=new Array(10),b=new Array(1e3),y=new Array(1e3),f={data:function(){return{ableTree:!1,ableRoaming:!1,switchRoaming:!1,ablePatrol:!1,switchPatrol:!1,simpleData:[{id:0,label:"整体模型"}],detailData:[{id:1,label:"详细模型",children:[{id:11,label:"1L",children:[{id:101,label:"1L墙体"},{id:102,label:"1L桌椅"}]},{id:12,label:"2L",children:[{id:103,label:"2L墙体"},{id:104,label:"2L桌椅"}]},{id:13,label:"3L",children:[{id:105,label:"3L墙体"},{id:106,label:"3L桌椅"}]},{id:14,label:"4L",children:[{id:107,label:"4L墙体"},{id:108,label:"4L桌椅"}]},{id:15,label:"5L",children:[{id:109,label:"5L墙体"},{id:110,label:"5L桌椅"}]},{id:16,label:"6L",children:[{id:111,label:"6L墙体"},{id:112,label:"6L桌椅"}]}],disabled:this.ableTree}],defaultProps:{children:"children",label:"label"},renderer:null,mesh:null,clock:null,isLoaded:Array.apply(null,Array(20)).map((function(){return!1}))}},mounted:function(){this.init(),this.animate()},methods:{roamingChange:function(e){var i=this;if(this.switchRoaming=!!this.switchRoaming,e){this.ablePatrol=!1,this.ableTree=!0;var t=null;if(this.isLoaded[0])t=0;else for(var o=11;o<=16;o++)if(this.isLoaded[o]){t=o;break}if(null===t)console.assert("roaming bug");else{b[t%10*10].start(),this.$message.success("您已进入漫游模式");var a=1;document.onclick=function(){if(i.switchRoaming)if(a=(a+1)%2,0===a)b[t%10*10].start();else if(1===a)for(var e=0,o=setInterval((function(){e++,4===e&&(b[t%10*10].start(),clearInterval(o),a=0)}),1e3),p=0;p<70;++p)null!=b[p]&&b[p].stop()}}}else{this.$message.success("您已退出漫游模式"),this.ablePatrol=!0,this.ableTree=!1;for(var p=0;p<70;++p)null!=b[p]&&b[p].stop()}},patrolChange:function(e){var i=this;if(this.switchPatrol=!!this.switchPatrol,e){this.ableRoaming=!1,this.ableTree=!0;for(var t=null,o=11;o<=16;o++)if(this.isLoaded[o]){t=o;break}if(null===t)console.assert("patrol bug");else{b[t%10*100].start();var a=1;document.onclick=function(){if(i.switchPatrol)if(a=(a+1)%2,0===a)i.$message.success("您已进入巡视模式，点击触摸屏会暂停15s"),b[t%10*100].start();else if(1===a)for(var e=0,o=setInterval((function(){e++,4===e&&(b[t%10*100].start(),clearInterval(o),a=0)}),1e3),p=100;p<700;++p)null!=b[p]&&b[p].stop()}}}else{this.$message.success("您已退出巡视模式"),this.ableRoaming=!0,this.ableTree=!1;for(var p=100;p<700;++p)null!=b[p]&&b[p].stop()}},resetChecked:function(){this.$refs.tree1.setCheckedKeys([]),this.$refs.tree2.setCheckedKeys([])},setCheckedKeys:function(e){this.$refs.tree1.setCheckedKeys([e]),this.$refs.tree2.setCheckedKeys([e])},handleTreeNodeClick:function(e){if(this.switchRoaming?(this.roamingChange(!1),this.switchRoaming=!1):this.switchPatrol&&(this.patrolChange(!1),this.switchPatrol=!1),0===e.id)if(this.resetChecked(),this.isLoaded[0]||this.setCheckedKeys(0),this.isLoaded[0]=!this.isLoaded[0],this.isLoaded[0])for(var i=1;i<=6;++i)h[i].visible=!0,x[i].visible=!1,this.ableRoaming=!0,this.ablePatrol=!1;else for(var t=1;t<=6;++t)h[t].visible=x[t].visible=!1,this.ableRoaming=this.ablePatrol=!1;else{if(this.isLoaded[0]){this.ableRoaming=this.ablePatrol=!1,this.resetChecked(),this.isLoaded[0]=!1,this.setCheckedKeys(e.id);for(var o=1;o<=6;++o)h[o].visible=x[o].visible=!1}for(var a=1;a<=6;++a)this.isLoaded[10+a]=h[a].visible&&x[a].visible;for(var p=h[1].visible,s=1;s<=6;++s)p=p&&h[s].visible&&x[s].visible;if(this.isLoaded[1]=p,1===e.id){this.isLoaded[1]=!this.isLoaded[1];for(var n=1;n<=6;++n)h[n].visible=x[n].visible=this.isLoaded[1],this.isLoaded[10+n]=this.isLoaded[1]}else e.id<20?(this.isLoaded[e.id]=!this.isLoaded[e.id],h[e.id%10].visible=x[e.id%10].visible=this.isLoaded[e.id]):e.id<1e3&&(e.id%2===0?(x[e.id%100/2].visible=!x[e.id%100/2].visible,h[e.id%100/2].visible===x[e.id%100/2].visible&&(this.isLoaded[10+e.id%100/2]=h[e.id%100/2].visible)):(h[(e.id%100+1)/2].visible=!h[(e.id%100+1)/2].visible,h[(e.id%100+1)/2].visible===x[(e.id%100+1)/2].visible&&(this.isLoaded[10+(e.id%100+1)/2]=h[(e.id%100+1)/2].visible)));for(var r=0,l=!1,d=11;d<=16;++d)this.isLoaded[d]&&r++,x[d%10].visible!==h[d%10].visible&&(l=!0);this.ableRoaming=!l&&1===r||this.isLoaded[0],this.ablePatrol=!l&&1===r}},init:function(){var e=this;this.container=document.getElementById("container"),this.container.style.height=window.innerHeight+"px",l=new p["db"],l.background=new p["j"](255,255,255),this.renderer=new p["sb"]({antialias:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.container.appendChild(this.renderer.domElement);var i=45,t=2,o=.1,a=50;this.container=document.getElementById("container"),c=new p["U"](i,t,o,a),c.position.set(25,15,15),c.lookAt(0,0,0);var n=new p["V"](16777215);n.position.set(400,200,300),l.add(n);var h=new p["a"](4473924);l.add(h),this.clock=new p["i"],window.onresize=function(){e.renderer.setSize(window.innerWidth,window.innerHeight),c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix()},d=new s["a"](c,this.renderer.domElement),d.target.set(5,0,-10),d.update();for(var x=1;x<=6;++x)this.objectLoader("./static/"+x.toString()+"楼墙体/"+x.toString()+"楼墙体.gltf","floor",x),this.objectLoader("./static/"+x.toString()+"楼桌椅/"+x.toString()+"楼桌椅.gltf","context",x);var f=new p["c"](200);l.add(f),y[0]={px:20,py:10,pz:10},y[1]={px:25,pz:-22,py:10},y[2]={px:-13,pz:-22,py:10},y[3]={px:-16,pz:10,py:10},y[4]={px:20,py:10,pz:10},y[10]={px:20,py:5,pz:10},y[11]={px:25,pz:-22,py:5},y[12]={px:-13,pz:-22,py:5},y[13]={px:-16,pz:10,py:5},y[14]={px:20,py:5,pz:10},y[20]={px:20,py:6,pz:10},y[21]={px:25,pz:-22,py:6},y[22]={px:-13,pz:-22,py:6},y[23]={px:-16,pz:10,py:6},y[24]={px:20,py:6,pz:10},y[30]={px:20,py:7,pz:10},y[31]={px:25,pz:-22,py:7},y[32]={px:-13,pz:-22,py:7},y[33]={px:-16,pz:10,py:7},y[34]={px:20,py:7,pz:10},y[40]={px:20,py:8,pz:10},y[41]={px:25,pz:-22,py:8},y[42]={px:-13,pz:-22,py:8},y[43]={px:-16,pz:10,py:8},y[44]={px:20,py:8,pz:10},y[50]={px:20,py:9,pz:10},y[51]={px:25,pz:-22,py:9},y[52]={px:-13,pz:-22,py:9},y[53]={px:-16,pz:10,py:9},y[54]={px:20,py:9,pz:10},y[60]={px:20,py:10,pz:10},y[61]={px:25,pz:-22,py:10},y[62]={px:-13,pz:-22,py:10},y[63]={px:-16,pz:10,py:10},y[64]={px:-16,pz:10,py:10};for(var u=function(e){for(var i=0;i<=4;++i)b[10*e+i]=new r["a"].Tween(y[10*e+i]).to(y[(i+1)%5===0?10*e+i-4:10*e+i+1],7e3).onUpdate((function(i){c.position.x=i.px,c.position.z=i.pz,c.position.y=i.py,0===e?c.lookAt(6.5,1,-6):1===e?c.lookAt(6.5,2,-6):2===e?c.lookAt(6.5,2,-6):3===e?c.lookAt(6.5,3,-6):4===e?c.lookAt(6.5,4,-6):5===e?c.lookAt(6.5,4,-6):6===e&&c.lookAt(6.5,5,-6)})),b[10*e+i].easing(r["a"].Easing.Quadratic.Out)},z=0;z<=6;++z)u(z);for(var v=0;v<=6;++v)for(var k=0;k<=4;++k)b[10*v+k].chain(b[(k+1)%5===0?10*v+k-4:10*v+k+1]);y[100]={px:2.12,pz:-9.75,py:.31},y[101]={px:10.4,pz:-9.75,py:.31},y[102]={px:10.4,pz:-9.75,py:.31},y[103]={px:10.4,pz:-2,py:.31},y[104]={px:10.4,pz:-2,py:.31},y[105]={px:2.12,pz:-2,py:.31},y[106]={px:2.12,pz:-2,py:.31},y[107]={px:2.12,pz:-9.75,py:.31},y[108]={px:2.12,pz:-9.75,py:.31},y[200]={px:2.12,pz:-9.75,py:1.2},y[201]={px:10.4,pz:-9.75,py:1.2},y[202]={px:10.4,pz:-9.75,py:1.2},y[203]={px:10.4,pz:-2,py:1.2},y[204]={px:10.4,pz:-2,py:1.2},y[205]={px:2.12,pz:-2,py:1.2},y[206]={px:2.12,pz:-2,py:1.2},y[207]={px:2.12,pz:-9.75,py:1.2},y[208]={px:2.12,pz:-9.75,py:1.2},y[300]={px:2.12,pz:-9.75,py:1.98},y[301]={px:10.4,pz:-9.75,py:1.98},y[302]={px:10.4,pz:-9.75,py:1.98},y[303]={px:10.4,pz:-2,py:1.98},y[304]={px:10.4,pz:-2,py:1.98},y[305]={px:2.12,pz:-2,py:1.98},y[306]={px:2.12,pz:-2,py:1.98},y[307]={px:2.12,pz:-9.75,py:1.98},y[308]={px:2.12,pz:-9.75,py:1.98},y[400]={px:2.12,pz:-9.75,py:2.87},y[401]={px:10.4,pz:-9.75,py:2.87},y[402]={px:10.4,pz:-9.75,py:2.87},y[403]={px:10.4,pz:-2,py:2.87},y[404]={px:10.4,pz:-2,py:2.87},y[405]={px:2.12,pz:-2,py:2.87},y[406]={px:2.12,pz:-2,py:2.87},y[407]={px:2.12,pz:-9.75,py:2.87},y[408]={px:2.12,pz:-9.75,py:2.87},y[500]={px:2.12,pz:-9.75,py:3.77},y[501]={px:10.4,pz:-9.75,py:3.77},y[502]={px:10.4,pz:-9.75,py:3.77},y[503]={px:10.4,pz:-2,py:3.77},y[504]={px:10.4,pz:-2,py:3.77},y[505]={px:2.12,pz:-2,py:3.77},y[506]={px:2.12,pz:-2,py:3.77},y[507]={px:2.12,pz:-9.75,py:3.77},y[508]={px:2.12,pz:-9.75,py:3.77},y[600]={px:2.12,pz:-9.75,py:4.57},y[601]={px:10.4,pz:-9.75,py:4.57},y[602]={px:10.4,pz:-9.75,py:4.57},y[603]={px:10.4,pz:-2,py:4.57},y[604]={px:10.4,pz:-2,py:4.57},y[605]={px:2.12,pz:-2,py:4.57},y[606]={px:2.12,pz:-2,py:4.57},y[607]={px:2.12,pz:-9.75,py:4.57},y[608]={px:2.12,pz:-9.75,py:4.57};for(var w=function(e){for(var i=0;i<=8;i++){var t=2;i%2!==0&&(t=1),b[100*e+i]=new r["a"].Tween(y[100*e+i]).to(y[(i+1)%9===0?100*e+i-8:100*e+i+1],5e3*t).onUpdate((function(i){c.position.x=i.px,c.position.z=i.pz,c.position.y=i.py;for(var t=0;t<=8;++t)console.log(Math.floor(100*y[100*e+t].px)),y[100*e+t].px=Math.floor(100*y[100*e+t].px)/100;if(c.position.x>y[100*e].px&&c.position.x<y[100*e+1].px&&c.position.z===y[100*e].pz)switch(e){case 1:c.lookAt(10.4,.31,-9.75),console.log(11111111111);break;case 2:c.lookAt(10.4,1.2,-9.75);break;case 3:c.lookAt(10.4,1.98,-9.75);break;case 4:c.lookAt(10.4,2.87,-9.75);break;case 5:c.lookAt(10.4,3.77,-9.75);break;case 6:c.lookAt(10.4,4.57,-9.75)}else if(c.position.z>y[100*e+1].pz&&c.position.z<y[100*e+3].pz&&c.position.x===y[100*e+3].px)switch(e){case 1:c.lookAt(10.4,.31,-2);break;case 2:c.lookAt(10.4,1.2,-2);break;case 3:c.lookAt(10.4,1.98,-2);break;case 4:c.lookAt(10.4,2.87,-2);break;case 5:c.lookAt(10.4,3.77,-2);break;case 6:c.lookAt(10.4,4.57,-2)}else if(c.position.x>y[100*e+5].px&&c.position.x<y[100*e+3].px&&c.position.z===y[100*e+5].pz)switch(e){case 1:c.lookAt(2.12,.31,-2);break;case 2:c.lookAt(2.12,1.2,-2);break;case 3:c.lookAt(2.12,1.98,-2);break;case 4:c.lookAt(2.12,2.87,-2);break;case 5:c.lookAt(2.12,3.77,-2);break;case 6:c.lookAt(2.12,4.57,-2)}else if(c.position.z>y[100*e].pz&&c.position.z<y[100*e+5].pz&&c.position.x===y[100*e].pz)switch(e){case 1:c.lookAt(2.12,.31,-9.75);break;case 2:c.lookAt(2.12,1.2,-9.75);break;case 3:c.lookAt(2.12,1.98,-9.75);break;case 4:c.lookAt(2.12,2.87,-9.75);break;case 5:c.lookAt(2.12,3.77,-9.75);break;case 6:c.lookAt(2.12,4.57,-9.75)}else c.position.z===y[100*e].pz&&c.position.x===y[100*e].px&&c.position.y===y[100*e].py?c.rotateY(-.016):c.position.z===[100*e+1].pz&&c.position.x===y[100*e+1].px&&c.position.y===y[100*e+1].py?c.rotateY(-.016):c.position.z===y[100*e+3].pz&&c.position.x===y[100*e+3].px&&c.position.y===y[100*e+3].py?c.rotateY(.016):c.position.z===y[100*e+5].pz&&c.position.x===y[100*e+5].px&&c.position.y===y[100*e+5].py&&c.rotateY(-.016)})),b[100*e+i].easing(r["a"].Easing.Quadratic.Out)}},g=1;g<=6;++g)w(g);for(var m=1;m<=6;++m)for(var A=0;A<=8;++A)b[100*m+A].chain(b[(A+1)%9===0?100*m+A-8:100*m+A+1])},animate:function(){r["a"].update(),requestAnimationFrame(this.animate),this.renderer.render(l,c)},objectLoader:function(e,i,t){this.gltfLoader=new n["a"],this.gltfLoader.load(e,(function(e){var o=e.scene;o.position.x=o.position.y=o.position.z=0,o.scale.x=o.scale.y=o.scale.z=.2,"floor"===i?(h[t]=new p["p"],h[t].add(o),l.add(h[t]),h[t].visible=!1):"context"===i&&(x[t]=new p["p"],x[t].add(o),l.add(x[t]),x[t].visible=!1)}))}}},u=f,z=(t("bcd0"),t("2877")),v=Object(z["a"])(u,o,a,!1,null,null,null);i["default"]=v.exports},ae40:function(e,i,t){var o=t("83ab"),a=t("d039"),p=t("5135"),s=Object.defineProperty,n={},r=function(e){throw e};e.exports=function(e,i){if(p(n,e))return n[e];i||(i={});var t=[][e],l=!!p(i,"ACCESSORS")&&i.ACCESSORS,d=p(i,0)?i[0]:r,c=p(i,1)?i[1]:void 0;return n[e]=!!t&&!a((function(){if(l&&!o)return!0;var e={length:-1};l?s(e,1,{enumerable:!0,get:r}):e[1]=1,t.call(e,d,c)}))}},b727:function(e,i,t){var o=t("0366"),a=t("44ad"),p=t("7b0b"),s=t("50c4"),n=t("65f0"),r=[].push,l=function(e){var i=1==e,t=2==e,l=3==e,d=4==e,c=6==e,h=5==e||c;return function(x,b,y,f){for(var u,z,v=p(x),k=a(v),w=o(b,y,3),g=s(k.length),m=0,A=f||n,L=i?A(x,g):t?A(x,0):void 0;g>m;m++)if((h||m in k)&&(u=k[m],z=w(u,m,v),e))if(i)L[m]=z;else if(z)switch(e){case 3:return!0;case 5:return u;case 6:return m;case 2:r.call(L,u)}else if(d)return!1;return c?-1:l||d?d:L}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},bcd0:function(e,i,t){"use strict";var o=t("25cb"),a=t.n(o);a.a},d81d:function(e,i,t){"use strict";var o=t("23e7"),a=t("b727").map,p=t("1dde"),s=t("ae40"),n=p("map"),r=s("map");o({target:"Array",proto:!0,forced:!n||!r},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,i,t){var o=t("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}}}]);
//# sourceMappingURL=chunk-8d059242.f0c2bb61.js.map